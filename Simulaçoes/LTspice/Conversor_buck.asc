Version 4
SHEET 1 2244 924
WIRE 0 -208 -208 -208
WIRE -928 -192 -1024 -192
WIRE -704 -192 -800 -192
WIRE -640 -192 -704 -192
WIRE -352 -192 -400 -192
WIRE 0 -176 0 -208
WIRE -928 -160 -960 -160
WIRE -352 -160 -400 -160
WIRE -352 -128 -400 -128
WIRE -208 -128 -208 -208
WIRE -48 -96 -80 -96
WIRE -960 -80 -960 -160
WIRE -912 -80 -960 -80
WIRE 752 -48 672 -48
WIRE -1024 -32 -1024 -192
WIRE 0 -32 0 -80
WIRE 0 -32 -80 -32
WIRE 80 -32 0 -32
WIRE 256 -32 160 -32
WIRE 304 -32 256 -32
WIRE 416 -32 304 -32
WIRE 512 -32 416 -32
WIRE 672 -32 672 -48
WIRE -208 0 -208 -48
WIRE 0 16 0 -32
WIRE 256 16 256 -32
WIRE 304 16 304 -32
WIRE 416 16 416 -32
WIRE 512 16 512 -32
WIRE 464 48 448 48
WIRE -1024 64 -1024 48
WIRE 672 64 672 48
WIRE -48 96 -80 96
WIRE 256 112 256 80
WIRE 304 112 304 80
WIRE 304 112 256 112
WIRE 416 128 416 96
WIRE 512 128 512 96
WIRE 512 128 416 128
WIRE -208 160 -208 80
WIRE 0 160 0 112
WIRE 304 160 304 112
WIRE 416 160 416 128
WIRE 752 176 752 -48
WIRE 800 176 752 176
WIRE 1040 176 992 176
WIRE 800 208 672 208
WIRE 1040 208 992 208
WIRE 672 256 672 208
WIRE 672 352 672 336
FLAG -208 160 0
FLAG -80 -96 HBT
IOPIN -80 -96 BiDir
FLAG 0 160 0
FLAG -80 -32 MBT
IOPIN -80 -32 BiDir
FLAG -352 -192 HBT
IOPIN -352 -192 BiDir
FLAG -352 -128 LBT
IOPIN -352 -128 BiDir
FLAG -80 96 LBT
IOPIN -80 96 BiDir
FLAG -352 -160 MBT
IOPIN -352 -160 BiDir
FLAG 304 160 0
FLAG 416 160 0
FLAG -208 -208 Vbt
FLAG -912 -80 I1
IOPIN -912 -80 In
FLAG 416 -32 Vbus
FLAG -704 -192 ErroBT
FLAG 672 352 0
FLAG 672 208 Ibt
FLAG 1040 208 I1
IOPIN 1040 208 Out
FLAG 1040 176 Vd
IOPIN 1040 176 Out
FLAG 672 64 0
FLAG 464 48 w
FLAG -1024 64 0
SYMBOL voltage -208 -16 R0
WINDOW 3 32 76 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value 7.2
SYMATTR InstName V1
SYMBOL ind 64 -16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 200µ
SYMATTR SpiceLine Ipk=6 Rser=15m
SYMBOL nmos -48 -176 R0
WINDOW 3 56 60 Left 2
SYMATTR Value irfz44n
SYMATTR InstName M1
SYMATTR Prefix X
SYMBOL cap 288 16 R0
SYMATTR InstName C1
SYMATTR Value 680µ
SYMATTR SpiceLine V=100 Rser=15m Lser=500p Rpar=12Meg
SYMBOL cap 240 16 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL carga_motor 384 16 R0
SYMATTR InstName X1
SYMBOL controladorPI -864 -176 R0
WINDOW 39 0 -23 Bottom 2
SYMATTR SpiceLine P=.42 I=1144 max=9
SYMATTR InstName X2
SYMBOL modulador_PWM_driver -528 -160 R0
SYMATTR InstName X6
SYMBOL nmos -48 16 R0
WINDOW 3 56 60 Left 2
SYMATTR Value irfz44n
SYMATTR InstName M2
SYMATTR Prefix X
SYMBOL bv 672 240 R0
SYMATTR InstName B1
SYMATTR Value V=I(L1)+.1*rand(time*1e5)-.05
SYMBOL frontend_analog 896 176 R0
SYMATTR InstName X3
SYMBOL bv 672 -48 R0
SYMATTR InstName B4
SYMATTR Value V=V(Vbus)+.1*random(time*1e5)-.05
SYMBOL res 496 0 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -192 -32 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 200m
SYMBOL voltage -1024 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
WINDOW 3 51 60 Left 2
SYMATTR Value 5
SYMATTR InstName V3
TEXT 848 -48 Left 2 !.tran 2
TEXT 336 -232 Left 2 !.ic I(L1)=0\n.ic V(Vbus)=0
TEXT 840 -192 Left 2 !.options reltol=1e-3\n.options gmin 1e-10\n.options maxstep=2.6u
TEXT 840 -80 Left 2 !.inc irfz44n.spi
