Version 4
SHEET 1 1296 680
WIRE 688 48 624 48
WIRE -816 64 -896 64
WIRE -704 64 -768 64
WIRE -96 64 -480 64
WIRE 256 64 176 64
WIRE 624 80 624 48
WIRE -768 96 -768 64
WIRE -816 112 -896 112
WIRE 176 112 176 64
WIRE 176 112 80 112
WIRE 480 112 432 112
WIRE -144 128 -224 128
WIRE -96 128 -144 128
WIRE 256 128 208 128
WIRE -816 160 -880 160
WIRE 624 176 624 160
WIRE -880 192 -880 160
WIRE -768 192 -768 176
WIRE -480 192 -480 64
WIRE -224 192 -224 128
WIRE -144 224 -144 128
WIRE 112 224 -144 224
WIRE 208 224 208 128
WIRE 208 224 176 224
WIRE -880 288 -880 272
WIRE -480 288 -480 272
WIRE -224 288 -224 272
FLAG -896 64 +
IOPIN -896 64 In
FLAG -768 192 0
FLAG -896 112 -
IOPIN -896 112 In
FLAG 624 176 0
FLAG -704 64 err
FLAG -880 288 0
FLAG 688 48 out
IOPIN 688 48 Out
FLAG 480 112 Ierr
FLAG -224 288 0
FLAG -480 288 0
SYMBOL e2 -768 80 R0
WINDOW 3 34 90 Left 2
SYMATTR Value 1
SYMATTR InstName E1
SYMBOL bv 624 64 R0
SYMATTR InstName B1
SYMATTR Value V= P*V(err)+I*V(Ierr)
SYMBOL bv -880 176 R0
SYMATTR InstName B2
SYMATTR Value V= limit( min, V(+), max )
SYMBOL SpecialFunctions\\sample -16 96 R0
WINDOW 3 -64 -52 Left 2
SYMATTR Value Vhigh =16
SYMATTR InstName A1
SYMBOL voltage -224 176 R0
WINDOW 3 38 92 Left 2
WINDOW 123 0 0 Left 2
SYMATTR Value PULSE(0 1 0 8n 8n {Ts/2} {Ts} 0)
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMBOL bv -480 176 R0
SYMATTR InstName B3
SYMATTR Value V= V(Ierr)+Ts*V(err)
SYMBOL SpecialFunctions\\sample 336 96 R0
WINDOW 3 -64 -52 Left 2
SYMATTR Value Vhigh =16
SYMATTR InstName A2
SYMBOL Digital\\inv 112 160 R0
SYMATTR InstName A3
TEXT 712 208 Left 2 !.params P=1\n.params I=0\n.param max=100\n.param min=0
TEXT -16 320 Left 2 !.param Ts=52u
